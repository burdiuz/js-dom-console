{"version":3,"file":"console.min.js","sources":["source/utils.js","source/data.js","source/nested.js","source/dom.js","source/index.js"],"sourcesContent":["// Assigned to an object, when rendering, if exists, will wrap content, like\n// Map{...} or Set[...]\nexport const CLASS_NAME_KEY = Symbol('class-name');\n\nexport const SPACE_LEVEL = '  ';\nexport const MAX_FUNC_STR_LEN = 50;\n\nexport const INFO_TYPE = 'info';\nexport const LOG_TYPE = 'log';\nexport const WARNING_TYPE = 'warning';\nexport const ERROR_TYPE = 'error';\nexport const SUCCESS_TYPE = 'success';\n\nexport const getClassName = (value) => {\n  if (!value) return '';\n\n  const match = String(value.constructor).match(/^(?:[\\w\\s\\d_$])+\\s+([\\w\\d_$]+)\\s*[^\\1]/);\n  // .match(/^(?:(?:[\\w\\s\\d_$])+\\s+|)([\\w\\d_$]+)\\s*[^\\2]/) - returns type if anonymous\n\n  return match ? match[1] : '';\n};\n\nexport const getStringWrap = (value) => {\n  let pre;\n  let post;\n  const name = value[CLASS_NAME_KEY] || '';\n\n  if (value instanceof Array) {\n    pre = '[';\n    post = ']';\n  } else {\n    pre = '{';\n    post = '}';\n  }\n\n  pre = `${name}${pre}`;\n\n  return { pre, post };\n};\n\nexport const removeAllChildren = (target) => {\n  while (target.firstChild) {\n    target.removeChild(target.firstChild);\n  }\n};\n","/* eslint-disable no-use-before-define */\nimport { CLASS_NAME_KEY, MAX_FUNC_STR_LEN, getClassName } from './utils';\n\nexport const isString = (value) => {\n  switch (typeof value) {\n    case 'symbol':\n    case 'string':\n    case 'boolean':\n    case 'number':\n      return true;\n    default:\n      return !value || value instanceof Date;\n  }\n};\n\nexport const toString = (value) => {\n  switch (typeof value) {\n    case 'symbol':\n      return String(value);\n    case 'string':\n      return value;\n    case 'boolean':\n    case 'number':\n    default:\n      if (value instanceof Date) {\n        return `Date(${value})`;\n      }\n\n      return `${value}`;\n  }\n};\n\nconst stringifyFunction = (value) => {\n  const content = String(value);\n\n  if (content.length <= MAX_FUNC_STR_LEN) {\n    return content;\n  }\n\n  const name = getClassName(value) || 'Function';\n\n  return {\n    content,\n    [CLASS_NAME_KEY]: `${name}(${content.substr(0, MAX_FUNC_STR_LEN)})`,\n  };\n};\n\nconst stringifyError = (value) => {\n  const { name, message, columnNumber, fileName, lineNumber } = value;\n  return {\n    [CLASS_NAME_KEY]: name || 'Error',\n    name: stringifyValue(name),\n    message: stringifyValue(message),\n    columnNumber: stringifyValue(columnNumber),\n    fileName: stringifyValue(fileName),\n    lineNumber: stringifyValue(lineNumber),\n  };\n};\n\nexport function stringifyValue(value) {\n  if (typeof value === 'string') {\n    return JSON.stringify(value);\n  }\n\n  if (isString(value)) {\n    return toString(value);\n  }\n\n  if (value instanceof Function) {\n    return stringifyFunction(value);\n  }\n\n  if (value instanceof Error) {\n    return stringifyError(value);\n  }\n\n  let result;\n\n  if (value instanceof Array) {\n    return value.map(stringifyValue);\n  }\n\n  if (value instanceof Map) {\n    result = {};\n    value.forEach((val, key) => {\n      result[key] = stringifyValue(val);\n    });\n  } else if (value instanceof Set) {\n    result = [];\n    value.forEach((val) => result.push(stringifyValue(val)));\n  } else {\n    result = {};\n    Object.keys(value).forEach((key) => {\n      result[key] = stringifyValue(value[key]);\n    });\n  }\n\n  if (result) {\n    result[CLASS_NAME_KEY] = getClassName(value) || 'Object';\n  } else {\n    result = `${getClassName(value)}()`;\n  }\n\n  return result;\n}\n","/* eslint-disable no-use-before-define */\nimport { SPACE_LEVEL, getStringWrap, removeAllChildren } from './utils';\nimport { stringifyValue } from './data';\n\nconst setExpandIconSymbol = (icon, expanded) => {\n  icon.innerHTML = expanded ? '-' : '+';\n};\n\nconst createExpandIcon = (expanded) => {\n  const icon = document.createElement('span');\n  icon.className = 'ui-console-button-expand';\n\n  setExpandIconSymbol(icon, expanded);\n\n  return icon;\n};\n\nconst createCollapsedContent = () => [document.createTextNode(' ... ')];\n\nconst createUINestedArrayContent = (list, space) => {\n  const result = [];\n  let text = '\\n';\n\n  list.forEach((value) => {\n    text += space;\n\n    if (typeof value === 'object') {\n      result.push(document.createTextNode(text));\n      text = '';\n      result.push(createUINested(value, space));\n    } else {\n      text += value;\n    }\n    text += ', \\n';\n  });\n\n  if (text) {\n    result.push(document.createTextNode(text));\n  }\n\n  return result;\n};\n\nconst createUINestedObjectContent = (object, space) => {\n  const result = [];\n  let text = '\\n';\n\n  Object.keys(object).forEach((key) => {\n    const value = object[key];\n    text += `${space}${stringifyValue(key)}: `;\n\n    if (typeof value === 'object') {\n      result.push(document.createTextNode(text));\n      text = '';\n      result.push(createUINested(value, space));\n    } else {\n      text += value;\n    }\n\n    text += ', \\n';\n  });\n\n  if (text) {\n    result.push(document.createTextNode(text));\n  }\n\n  return result;\n};\n\nconst createUINestedContent = (value, initSpace) => {\n  const space = `${SPACE_LEVEL}${initSpace}`;\n\n  if (value instanceof Array) {\n    return createUINestedArrayContent(value, space);\n  }\n\n  return createUINestedObjectContent(value, space);\n};\n\nexport function createUINested(value, space = '', initExpanded = false) {\n  let expanded = initExpanded;\n  let contentExpanded;\n  const contentCollapsed = createCollapsedContent();\n\n  const { pre, post } = getStringWrap(value);\n  const icon = createExpandIcon(expanded);\n  const wrapper = document.createElement('span');\n\n  wrapper.className = 'ui-console-clickable';\n\n  const drawContents = () => {\n    let content;\n\n    removeAllChildren(wrapper);\n\n    wrapper.appendChild(icon);\n    wrapper.appendChild(document.createTextNode(pre));\n\n    if (expanded) {\n      if (!contentExpanded) {\n        contentExpanded = createUINestedContent(value, space);\n      }\n\n      content = contentExpanded;\n    } else {\n      content = contentCollapsed;\n    }\n\n    content.forEach((node) => wrapper.appendChild(node));\n\n    wrapper.appendChild(document.createTextNode(post));\n  };\n\n  wrapper.addEventListener('click', (event) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    expanded = !expanded;\n\n    setExpandIconSymbol(icon, expanded);\n    drawContents();\n  });\n\n  drawContents();\n\n  return wrapper;\n}\n","import { isString, toString, stringifyValue } from './data';\nimport { createUINested } from './nested';\n\nconst createSimpleValue = (value) => document.createTextNode(`${value} `);\n\nexport const buildContent = (content, item) => {\n  content.forEach((value) => {\n    let result;\n\n    if (isString(value)) {\n      result = toString(value);\n    } else {\n      result = stringifyValue(value);\n    }\n\n    if (typeof result === 'object') {\n      item.appendChild(createUINested(result, '', true));\n    } else {\n      item.appendChild(createSimpleValue(result));\n    }\n  });\n\n  return item;\n};\n","import {\n  INFO_TYPE,\n  LOG_TYPE,\n  WARNING_TYPE,\n  ERROR_TYPE,\n  SUCCESS_TYPE,\n} from './utils';\nimport { buildContent } from './dom';\n\nexport const init = (container, maxItems = Number.MAX_SAFE_INTEGER) => {\n  const shiftOverMax = () => {\n    while (maxItems > 0 && maxItems < container.childElementCount) {\n      const child = container.firstElementChild;\n      if (!child) {\n        return;\n      }\n\n      child.remove();\n    }\n  };\n\n  const pushItem = (content, type = LOG_TYPE) => {\n    const item = document.createElement('div');\n    item.className = `ui-console-item ui-console-item-${type}`;\n\n    buildContent(content, item);\n\n    container.appendChild(item);\n    shiftOverMax();\n  };\n\n  return {\n    info: (...content) => pushItem(content, INFO_TYPE),\n    log: (...content) => pushItem(content, LOG_TYPE),\n    warn: (...content) => pushItem(content, WARNING_TYPE),\n    error: (...content) => pushItem(content, ERROR_TYPE),\n    success: (...content) => pushItem(content, SUCCESS_TYPE),\n  };\n};\n\nexport const create = (wrapper, maxItems = Number.MAX_SAFE_INTEGER) => {\n  const container = document.createElement('div');\n  container.className = 'ui-console ui-console-container';\n  wrapper.appendChild(container);\n\n  return init(container, maxItems);\n};\n"],"names":["CLASS_NAME_KEY","Symbol","getClassName","value","match","String","constructor","getStringWrap","pre","post","name","Array","removeAllChildren","target","firstChild","removeChild","isString","Date","toString","stringifyFunction","content","length","substr","stringifyError","message","columnNumber","fileName","lineNumber","stringifyValue","JSON","stringify","Function","Error","result","map","Map","forEach","val","key","Set","push","keys","setExpandIconSymbol","icon","expanded","innerHTML","createExpandIcon","document","createElement","className","createCollapsedContent","createTextNode","createUINestedContent","initSpace","space","list","text","createUINested","createUINestedArrayContent","object","createUINestedObjectContent","initExpanded","contentExpanded","contentCollapsed","wrapper","drawContents","appendChild","node","addEventListener","event","preventDefault","stopPropagation","buildContent","item","createSimpleValue","init","container","maxItems","Number","MAX_SAFE_INTEGER","pushItem","type","childElementCount","child","firstElementChild","remove"],"mappings":"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"}